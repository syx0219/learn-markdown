<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content=Elecrow><link rel=canonical href=https://wiki.elecrow.com/Products/case/Case4_Multi-Channel_Application_Routine_for_Raspberry_Pi_Gateways_and_Nodes.html><link rel=icon href=../../assets/favicon.ico><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.15"><title>Case 4:Multi-Channel Application Routine for Raspberry Pi Gateways and Nodes - Elecrow</title><link rel=stylesheet href=../../assets/stylesheets/main.7e359304.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config",""),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=../../assets/stylesheets/custom.00c04c01.min.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#raspberry-pi-setup-steps class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../index.html title=Elecrow class="md-header__button md-logo" aria-label=Elecrow data-md-component=logo> <img src=../../assets/images/ELECROW_LOGO.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Elecrow </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Case 4:Multi-Channel Application Routine for Raspberry Pi Gateways and Nodes </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8v2m9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=indigo aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=http://192.168.2.102:3000/ELECROW_IT/Elecrow_wiki title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> ELECROW_IT/Elecrow_wiki </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> Main Page </a> </li> <li class=md-tabs__item> <a href=../index.html class=md-tabs__link> Products </a> </li> <li class=md-tabs__item> <a href=../../Tutorials/index.html class=md-tabs__link> Tutorials </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=Elecrow class="md-nav__button md-logo" aria-label=Elecrow data-md-component=logo> <img src=../../assets/images/ELECROW_LOGO.png alt=logo> </a> Elecrow </label> <div class=md-nav__source> <a href=http://192.168.2.102:3000/ELECROW_IT/Elecrow_wiki title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> ELECROW_IT/Elecrow_wiki </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> Main Page </span> </a> </li> <li class=md-nav__item> <a href=../index.html class=md-nav__link> <span class=md-ellipsis> Products </span> </a> </li> <li class=md-nav__item> <a href=../../Tutorials/index.html class=md-nav__link> <span class=md-ellipsis> Tutorials </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#raspberry-pi-setup-steps class=md-nav__link> <span class=md-ellipsis> Raspberry Pi setup steps </span> </a> <nav class=md-nav aria-label="Raspberry Pi setup steps"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-installing-the-lr1302-lorawan-hat-onto-the-raspberry-pi-and-installing-the-lr1302-gateway-module class=md-nav__link> <span class=md-ellipsis> Step 1. Installing the LR1302 LoRaWAN HAT onto the Raspberry Pi and installing the LR1302 Gateway Module </span> </a> </li> <li class=md-nav__item> <a href=#step-2-enabling-raspbian-i2c-and-spi-interfaces class=md-nav__link> <span class=md-ellipsis> Step 2. Enabling Raspbian I2C and SPI Interfaces </span> </a> </li> <li class=md-nav__item> <a href=#step-3-getting-and-compiling-the-sx1302-source class=md-nav__link> <span class=md-ellipsis> Step 3. Getting and compiling the SX1302 source </span> </a> <nav class=md-nav aria-label="Step 3. Getting and compiling the SX1302 source"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#now-lets-install-git-from-github-and-download-sx1302_hal-libraries-and-programs-for-the-sx1302-lora-gateway class=md-nav__link> <span class=md-ellipsis> Now let's install git from github and download sx1302_hal (libraries and programs for the SX1302 LoRa gateway) </span> </a> </li> <li class=md-nav__item> <a href=#move-to-the-sx1302_hal-folder-and-compile-everything class=md-nav__link> <span class=md-ellipsis> Move to the sx1302_hal folder and compile everything </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ttn-configuration class=md-nav__link> <span class=md-ellipsis> TTN configuration </span> </a> <nav class=md-nav aria-label="TTN configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-add-gateway-ttn-address-eu1cloudthethingsnetwork-you-need-to-register-an-account-to-access-the-console-to-add class=md-nav__link> <span class=md-ellipsis> 1. Add gateway (TTN address eu1.cloud.thethings.network, you need to register an account to access the console to add) </span> </a> <nav class=md-nav aria-label="1. Add gateway (TTN address eu1.cloud.thethings.network, you need to register an account to access the console to add)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#note-select-the-band-united-states-902-928mhz-fsb1-select-this-band-when-testing-lora-nodes-using-the-915mhz-band class=md-nav__link> <span class=md-ellipsis> Note: Select the band "United States 902-928MHz FSB1" (select this band when testing LoRa nodes using the 915MHz band). </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#2-add-node class=md-nav__link> <span class=md-ellipsis> 2. Add Node </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#functional-debugging-of-lora-nodes-with-lr1262-terminal class=md-nav__link> <span class=md-ellipsis> Functional debugging of loRa nodes with LR1262 terminal </span> </a> <nav class=md-nav aria-label="Functional debugging of loRa nodes with LR1262 terminal"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#raspberry-pi-lorawan-gateway class=md-nav__link> <span class=md-ellipsis> Raspberry Pi LoraWan Gateway </span> </a> <nav class=md-nav aria-label="Raspberry Pi LoraWan Gateway"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-connect-to-the-network-wifi-or-wired class=md-nav__link> <span class=md-ellipsis> 1. Connect to the network (wifi or wired) </span> </a> </li> <li class=md-nav__item> <a href=#2-run-the-programme class=md-nav__link> <span class=md-ellipsis> 2. Run the programme </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#lr1262-connects-to-pc-serial-port class=md-nav__link> <span class=md-ellipsis> LR1262 connects to PC serial port </span> </a> <nav class=md-nav aria-label="LR1262 connects to PC serial port"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-otaa-distribution-network class=md-nav__link> <span class=md-ellipsis> 1. OTAA distribution network </span> </a> </li> <li class=md-nav__item> <a href=#2-lr1262-node class=md-nav__link> <span class=md-ellipsis> 2. LR1262 node </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Case 4:Multi-Channel Application Routine for Raspberry Pi Gateways and Nodes</h1> <p>Equipment: LR1302(915) Gateway Module , LR1302 LoRaWAN Hat</p> <p>Website：<a href=https://www.elecrow.com/lr1302-lorawan-gateway-module-spi-us915-sx1302-long-range-gateway-module-support-8-channels.html>LR1302(915) Gateway Module</a> , <a href=https://www.elecrow.com/lr1302-868m-915m-lorawan-hat-for-rpi-sx1302-long-range-module-support-rpi-1-2-3-4-5-series.html>LR1302 LoRaWAN Hat</a></p> <h2 id=raspberry-pi-setup-steps>Raspberry Pi setup steps<a class=headerlink href=#raspberry-pi-setup-steps title="Permanent link">&para;</a></h2> <hr> <h3 id=step-1-installing-the-lr1302-lorawan-hat-onto-the-raspberry-pi-and-installing-the-lr1302-gateway-module><strong>Step 1. Installing the LR1302 LoRaWAN HAT onto the Raspberry Pi and installing the LR1302 Gateway Module</strong><a class=headerlink href=#step-1-installing-the-lr1302-lorawan-hat-onto-the-raspberry-pi-and-installing-the-lr1302-gateway-module title="Permanent link">&para;</a></h3> <p>Easily install the Hat onto the Raspberry Pi 40-pin connector. Firstly power down the Raspberry Pi. Insert the LR1302 module into the Hat as shown below and tighten it</p> <p><img alt="Gateway hat.png" loading=lazy src=https://wiki.elecrow.com/images/9/9f/Gateway_hat.png></p> <h3 id=step-2-enabling-raspbian-i2c-and-spi-interfaces><strong>Step 2. Enabling Raspbian I2C and SPI Interfaces</strong><a class=headerlink href=#step-2-enabling-raspbian-i2c-and-spi-interfaces title="Permanent link">&para;</a></h3> <p>The LR1302 module communicates with the Raspberry Pi via SPI and I2C. However, these two interfaces are not enabled by default in Raspbian, so developers need to enable them before using the LR1302. Here, we introduce a command line way to enable the SPI and I2C interfaces.</p> <p>Firstly, log in to the Raspberry Pi via SSH or using a monitor (do not use the serial console as the GPS module on the Pi Hat will take over the Pi's hardware UART pins), and then enter the command line sudo raspi-config to open the Rasberry Pi Software Configuration Tool.</p> <p><img alt=Command.png loading=lazy src=https://wiki.elecrow.com/images/thumb/9/94/Command.png/500px-Command.png></p> <p>1.Select "Interface Options".</p> <p>2.Select SPI, and then select Yes to enable it.</p> <p>3.Select I2C and select Yes to enable it.</p> <p>4.Select Serial Port, then select No "Do you want to log into the shell..." and select Yes "Do you want serial port hardware...".</p> <p>5.Afterwards, please reboot the Raspberry Pi to make sure these settings are valid.</p> <h3 id=step-3-getting-and-compiling-the-sx1302-source><strong>Step 3. Getting and compiling the SX1302 source</strong><a class=headerlink href=#step-3-getting-and-compiling-the-sx1302-source title="Permanent link">&para;</a></h3> <h4 id=now-lets-install-git-from-github-and-download-sx1302_hal-libraries-and-programs-for-the-sx1302-lora-gateway><strong>Now let's install git from github and download sx1302_hal (libraries and programs for the SX1302 LoRa gateway)</strong><a class=headerlink href=#now-lets-install-git-from-github-and-download-sx1302_hal-libraries-and-programs-for-the-sx1302-lora-gateway title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>sudo apt update
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>sudo apt install -y git
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>cd ~
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>git clone https://github.com/Elecrow-RD/LR1302_loraWAN.git
</span></code></pre></div> <h4 id=move-to-the-sx1302_hal-folder-and-compile-everything><strong>Move to the sx1302_hal folder and compile everything</strong><a class=headerlink href=#move-to-the-sx1302_hal-folder-and-compile-everything title="Permanent link">&para;</a></h4> <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>cd ~/sx1302_hal
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>make
</span></code></pre></div> <h2 id=ttn-configuration>TTN configuration<a class=headerlink href=#ttn-configuration title="Permanent link">&para;</a></h2> <hr> <h3 id=1-add-gateway-ttn-address-eu1cloudthethingsnetwork-you-need-to-register-an-account-to-access-the-console-to-add><strong>1. Add gateway (TTN address eu1.cloud.thethings.network, you need to register an account to access the console to add)</strong><a class=headerlink href=#1-add-gateway-ttn-address-eu1cloudthethingsnetwork-you-need-to-register-an-account-to-access-the-console-to-add title="Permanent link">&para;</a></h3> <p><img alt=TTN.png loading=lazy src=https://wiki.elecrow.com/images/b/ba/TTN.png></p> <p>Enter the gateway ID, click Confirm, enter the gateway name, and select the operating band.</p> <p><img alt=TTN1.png loading=lazy src=https://wiki.elecrow.com/images/6/6c/TTN1.png></p> <p><img alt="Register gateway.png" loading=lazy src=https://wiki.elecrow.com/images/thumb/3/3d/Register_gateway.png/500px-Register_gateway.png></p> <h4 id=note-select-the-band-united-states-902-928mhz-fsb1-select-this-band-when-testing-lora-nodes-using-the-915mhz-band><strong>Note: Select the band "United States 902-928MHz FSB1" (select this band when testing LoRa nodes using the 915MHz band).</strong><a class=headerlink href=#note-select-the-band-united-states-902-928mhz-fsb1-select-this-band-when-testing-lora-nodes-using-the-915mhz-band title="Permanent link">&para;</a></h4> <h3 id=2-add-node><strong>2. Add Node</strong><a class=headerlink href=#2-add-node title="Permanent link">&para;</a></h3> <p><img alt="Add node.png" loading=lazy src=https://wiki.elecrow.com/images/9/94/Add_node.png></p> <p>Enter the node ID, name, and description</p> <p><img alt=Enter1.png loading=lazy src=https://wiki.elecrow.com/images/4/40/Enter1.png></p> <p><img alt=Enter2.png loading=lazy src=https://wiki.elecrow.com/images/f/fe/Enter2.png></p> <p><img alt="Enter 3.png" loading=lazy src=https://wiki.elecrow.com/images/6/64/Enter_3.png></p> <p><img alt=Enter4.png loading=lazy src=https://wiki.elecrow.com/images/b/b6/Enter4.png></p> <p>Configure the node parameters added by TTN to the node.</p> <p><img alt="Ttn node.png" loading=lazy src=https://wiki.elecrow.com/images/3/39/Ttn_node.png></p> <p>It must be confirmed that the LR1262 module has been burned with the factory firmware programme. Open the serial port tool and enter the network.</p> <h2 id=functional-debugging-of-lora-nodes-with-lr1262-terminal>Functional debugging of loRa nodes with LR1262 terminal<a class=headerlink href=#functional-debugging-of-lora-nodes-with-lr1262-terminal title="Permanent link">&para;</a></h2> <hr> <h3 id=raspberry-pi-lorawan-gateway><strong>Raspberry Pi LoraWan Gateway</strong><a class=headerlink href=#raspberry-pi-lorawan-gateway title="Permanent link">&para;</a></h3> <h4 id=1-connect-to-the-network-wifi-or-wired><strong>1. Connect to the network (wifi or wired)</strong><a class=headerlink href=#1-connect-to-the-network-wifi-or-wired title="Permanent link">&para;</a></h4> <h4 id=2-run-the-programme><strong>2. Run the programme</strong><a class=headerlink href=#2-run-the-programme title="Permanent link">&para;</a></h4> <p>1). Open Raspberry Pi shell</p> <p>2). Run the command</p> <p>Note: Please make sure there is reset_lgw.sh file under current path when running lora_pkt_fwd. 915SPI mode:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>Sudo /home/pi/sx1302_hal/packet_forwarder/lora_pkt_fwd -c 
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>/home/pi/sx1302_hal/packet_forwarder/global_conf.json.sx1250.US915.USB
</span></code></pre></div> <p>3). Check if you are connected to the TTN server and receiving heartbeat packets.</p> <p><img alt=Heartbeat.png loading=lazy src=https://wiki.elecrow.com/images/2/2b/Heartbeat.png></p> <h3 id=lr1262-connects-to-pc-serial-port><strong>LR1262 connects to PC serial port</strong><a class=headerlink href=#lr1262-connects-to-pc-serial-port title="Permanent link">&para;</a></h3> <h4 id=1-otaa-distribution-network><strong>1. OTAA distribution network</strong><a class=headerlink href=#1-otaa-distribution-network title="Permanent link">&para;</a></h4> <p>You need to modify DEVEUI according to the relevant data displayed by the TTN, APPEUI and APPKEY. (The setting of the TTN node is taken as an example in Case 1, and users need to set it according to their own TTN node, and also configure different frequency parameters according to different modes.)</p> <h4 id=2-lr1262-node><strong>2. LR1262 node</strong><a class=headerlink href=#2-lr1262-node title="Permanent link">&para;</a></h4> <p>1). Open the serial port tool, serial port settings</p> <ul> <li>Baud rate: 9600</li> <li>Tick the serial port carriage return line feed</li> </ul> <p>2). Node access single channel gateway configuration steps (send AT command)</p> <ul> <li>Select the node for single channel/multi-channel mode mode: AT+ChannelMode=1 (1 for multi-channel)</li> <li>Set the node into the network frequency band: AT + BAND = 8 (8 for 915 band)</li> </ul> <p>3). Set the node entry triad (OTAA):</p> <ul> <li>Set node DevEui: AT+DevEui=70B3D57ED005B7FF</li> <li>Set node AppEui: AT+AppEui=000000000000000003</li> <li>Set node AppKey: AT+AppKey=A8D7E5959F7746D902BF52BA2F899E3E</li> </ul> <p><img alt="Node entry.png" loading=lazy src=https://wiki.elecrow.com/images/f/fe/Node_entry.png></p> <p>4). Setting the node to start netting: AT+JOIN=1,8 (parameter description: the first parameter is to select the netting mode, 0 is ABP mode, 1 is OTAA mode, the second parameter is the number of times of cyclic request for netting in OTAA mode (1-8), no cycle is needed in ABP mode)</p> <p><img alt=915.0.png loading=lazy src=https://wiki.elecrow.com/images/8/84/915.0.png></p> <p>5). Start sending data: AT+SEND=1:1:223333 (parameter description: the last parameter is the data to be sent, and only an even number of data can be sent)</p> <p><img alt=Data4.png loading=lazy src=https://wiki.elecrow.com/images/2/26/Data4.png></p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.bd41221c.min.js></script> <script src=../../assets/javascripts/custom.129bd6ad.min.js></script> </body> </html>